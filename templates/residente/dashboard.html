{% extends "residente/base_residente.html" %}

{% block title %}Dashboard Residente{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='residente/dashboard.css') }}">
{% endblock %}

{% block content %}
<div class="dashboard-header">
    <h1>Dashboard Residente</h1>
    <p>Bienvenido de vuelta, {{ usuario_nombre }}</p>
</div>

<div class="metrics-grid">
    <!-- Estado de Pagos -->
    <div class="metric-card payment-status">
        <div class="metric-icon">
            <i class="fas fa-money-bill-wave"></i>
        </div>
        <div class="metric-info">
            <h3>Estado de Pagos</h3>
            <div class="metric-value">{{ estado_pagos.estado }}</div>
            <div class="metric-detail">
                <span class="amount">${{ "%.2f"|format(estado_pagos.monto_pendiente) }}</span>
                <span class="date">Vence: {{ estado_pagos.fecha_vencimiento }}</span>
            </div>
        </div>
    </div>

    <!-- Solicitudes Activas -->
    <div class="metric-card solicitudes">
        <div class="metric-icon">
            <i class="fas fa-ticket-alt"></i>
        </div>
        <div class="metric-info">
            <h3>Solicitudes Activas</h3>
            <div class="metric-value">{{ solicitudes_activas }}</div>
            <div class="metric-detail">
                <span>{{ solicitudes_prioridad_alta }} de prioridad alta</span>
            </div>
        </div>
    </div>

    <!-- InformaciÃ³n del Departamento -->
    <div class="metric-card departamento">
        <div class="metric-icon">
            <i class="fas fa-home"></i>
        </div>
        <div class="metric-info">
            <h3>Mi Departamento</h3>
            <div class="metric-value">Piso {{ residente_data.piso }}</div>
            <div class="metric-detail">
                <span>Dpto: {{ residente_data.departamento }}</span>
                <span>Ingreso: {{ residente_data.fecha_ingreso }}</span>
            </div>
        </div>
    </div>

    <!-- Anuncio de Mantenimiento -->
    <div class="metric-card mantenimiento">
        <div class="metric-icon">
            <i class="fas fa-tools"></i>
        </div>
        <div class="metric-info">
            <h3>Anuncio de Mantenimiento</h3>
            {% if anuncio_mantenimiento %}
            <div class="metric-value">{{ anuncio_mantenimiento.titulo }}</div>
            <div class="metric-detail">
                <span>{{ anuncio_mantenimiento.descripcion }}</span>
                <span class="date">{{ anuncio_mantenimiento.fecha }}</span>
            </div>
            {% else %}
            <div class="metric-value">Sin anuncios</div>
            <div class="metric-detail">
                <span>No hay mantenimientos programados</span>
            </div>
            {% endif %}
        </div>
    </div>
</div>

<div class="recent-activity">
    <div class="card">
        <div class="card-header">
            <h3>Actividad Reciente</h3>
        </div>
        <div class="activity-list">
            {% for actividad in actividades_recientes %}
            <div class="activity-item">
                <div class="activity-icon">
                    <i class="fas {{ actividad.icono }}"></i>
                </div>
                <div class="activity-content">
                    <p class="activity-text">{{ actividad.descripcion }}</p>
                    <span class="activity-time">{{ actividad.fecha }}</span>
                </div>
            </div>
            {% else %}
            <div class="activity-item">
                <div class="activity-icon">
                    <i class="fas fa-info-circle"></i>
                </div>
                <div class="activity-content">
                    <p class="activity-text">No hay actividades recientes</p>
                    <span class="activity-time">Hoy</span>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='residente/dashboard.js') }}"></script>
{% endblock %}